#!/usr/bin/env node

var glob  = require('glob');
var Mocha = require('mocha');
var path  = require('path');

var mocha   = new Mocha();
var testDir = path.join(__dirname, '..', 'test');

// Install WordPress first
mocha.addFile(path.join(testDir, 'functional', 'install.js'));

glob.sync('**/*.js', {
  cwd: testDir,
  nosort: true,
}).forEach(function(file) {
  mocha.addFile(path.join(testDir, file));
});

mocha
  .reporter('spec')
  .ui('bdd')
  .run(process.exit)
;
